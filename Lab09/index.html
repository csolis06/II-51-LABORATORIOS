<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Ejemplo Base - JavaScript Interactivo</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px;}
        #canvasArea { 
            border: 1px solid black; 
            margin-bottom: 20px; 
        }

        .drop-zone {
            width: 200px;
            height: 200px;
            border: 2px dashed #cccc;
            display: inline-block;
            margin-right: 10px;
            text-align: center;
            vertical-align: top;
            padding-top: 60px;
            background-color: #f9f9f9;
        }

        .drop-zone.over {
            border-color: #333;
            background-color: #e0e0e0;
        }

        img.preview {
            display: block;
            max-width: 100%;
            margin-top: 10px;
        }
    </style>
</head>
<body>

    <h2>Canvas</h2>
    <canvas id="canvasArea" width="300" height="200"></canvas><br>
    <button onclick="draw()">Dibujar círculo</button>

    <h2>Drag and Drop</h2>
    <div id="drag1" draggable="true" ondragstart="drag(event)" 
        style="width:100px; height:100px; background-color: #3498db; color: #fff; 
        text-align: center; line-height:100px; cursor:move;">
        Arrastrame
    </div>

    <div id="drop1" class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)">
        Caja 1
    </div>

    <div id="drop2" class="drop-zone" ondrop="drop(event)" ondragover="allowDrop(event)">
        Caja 2
    </div>

    <h2>Lectura de Archivos</h2>
    <input type="file" onchange="previewFile(event)">
    <img id="preview" class="preview" src="">

<script>
    // ===================================
    // 1. CANVAS: Dibujar Círculo Rojo
    // ===================================
    function draw() {
        const canvas = document.getElementById('canvasArea');
        const ctx = canvas.getContext('2d');
        
        // Limpiar el canvas antes de dibujar uno nuevo
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // Iniciar el camino para dibujar
        ctx.beginPath();
        
        // Dibujar el arco (Círculo de radio 40, centrado en (150, 100))
        // NOTA: Se modificó la llamada ctx.arc() para que el círculo se vea correctamente.
        // La imagen previa tenía ctx.arc(150, 50, 0, 2 * Math.PI); lo cual dibuja un punto.
        ctx.arc(150, 100, 40, 0, 2 * Math.PI); 
        
        // Rellenar con color rojo
        ctx.fillStyle = '#e74c3c'; // Rojo (Código original)
        ctx.fill();
    }

    // ===================================
    // 2. DRAG AND DROP
    // ===================================

    // Función que permite que un elemento sea soltado sobre el área.
    function allowDrop(ev) {
        ev.preventDefault();
        // Opcional: Agregar clase 'over' para realimentación visual (manejo con CSS)
        if (ev.target.classList.contains('drop-zone')) {
            ev.target.classList.add('over');
        }
    }

    // Función que se llama cuando el arrastre comienza (guardar el ID del elemento)
    function drag(ev) {
        // Almacenar el ID del elemento arrastrado
        ev.dataTransfer.setData("text", ev.target.id);
    }
    
    // Función que se llama cuando se suelta el elemento en la zona de destino.
    function drop(ev) {
        ev.preventDefault();
        // Remover la clase 'over'
        if (ev.target.classList.contains('drop-zone')) {
            ev.target.classList.remove('over');
        }

        // Obtener el ID del elemento arrastrado
        var data = ev.dataTransfer.getData("text");
        var draggedElement = document.getElementById(data);

        // Mover el elemento arrastrado a la zona de destino
        // Usamos appendChild para colocar el elemento dentro de la caja de destino.
        ev.target.appendChild(draggedElement); 
        
        // Opcional: Ajustar el estilo del elemento arrastrado para que se centre mejor en la caja de destino.
        draggedElement.style.margin = 'auto';
        draggedElement.style.position = 'relative';
        
    }
    
    // ===================================
    // 3. LECTURA DE ARCHIVOS (Preview)
    // ===================================
    function previewFile(event) {
        var file = event.target.files[0];
        var reader = new FileReader();

        reader.onloadend = function() {
            var preview = document.getElementById('preview');
            preview.src = reader.result;
        }

        if (file) {
            reader.readAsDataURL(file);
        } else {
            var preview = document.getElementById('preview');
            preview.src = "";
        }
    }
</script>
</body>
</html>