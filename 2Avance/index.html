<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Universidad Tecnológica Internacional</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="site-header" role="banner">
        <img src="images/logo.jpg" alt="Logo de pagína" class="logo">
        <div class="header-title">
            <h1>Universidad Tecnólogica Internacional</h1>
        </div>
    </header>

    <!-- Barra tipo menú al iniciar la sesión -->
    <nav id="modules-bar" class="modules-bar" role="navigation" aria-label="Módulos" hidden>
        <ul class="modules-list">
            <li class="modules-item"><button data-target="estudiantes" class="modules-link">Estudiantes</button></li>
            <li class="modules-item"><button data-target="cursos" class="modules-link">Cursos</button></li>
            <li class="modules-item"><button data-target="profesores" class="modules-link">Profesores</button></li>
            <li class="modules-item"><button data-target="registro" class="modules-link">Registro</button></li>
            <li class="modules-item"><button id="cerrar-sesion" class="modules-link logout">Cerrar Sesión</button></li>
        </ul>
    </nav>

    <main class="container" role="main">

        <!-- LOGIN -->
        <section id="login-view" class="card login-card">
            <form id="login-form" class="form-column" novalidate>
                <label for="email">Correo Electrónico:</label>
                <input type="email" id="email" required placeholder="@edu.ui.ac.cr">

                <label for="password">Contraseña:</label>
                <input type="password" id="password" required minlength="4">

                <button type="submit" class="btn primary">Iniciar Sesión</button>
            </form>
        </section>

       <!-- Tabla de Estudiantes -->
        <section id="estudiantes" class="tab-content" hidden>
            <div class="card">
                <h3 class="tab-title">Estudiantes</h3>

                <form id="buscar-estudiantes" class="form-inline" onsubmit="event.preventDefault(); filtrarEstudiantes();">
                    <label for="filtro">Buscar (Nombre o ID):</label>
                    <input type="search" id="filtro" placeholder="Ej: Ana o 12A">
                    <button type="submit" class="btn">Buscar</button>
                    <button type="button" class="btn" id="limpiar-filtro">Limpiar</button>
                </form>

                <table id="tabla-estudiantes" class="data-table">
                    <thead>
                        <tr><th>ID</th><th>Nombre</th><th>Email</th><th>Edad</th><th>Carrera</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>12A</td><td>Ana Gómez</td><td>anago@edu.ui.ac.cr</td><td>22</td><td>Informática</td></tr>
                        <tr><td>13A</td><td>Luis Pérez</td><td>luispe@edu.ui.ac.cr</td><td>24</td><td>Administración</td></tr>
                        <tr><td>14A</td><td>María Rojas</td><td>mariar@edu.ui.ac.cr</td><td>26</td><td>Economía</td></tr>
                        <tr><td>15A</td><td>Guillermo Cruz</td><td>guillermo@edu.ui.ac.cr</td><td>28</td><td>Electrónica</td></tr>
                    </tbody>
                </table>
            </div>
        </section>


        <!-- Tabla de Cursos -->
        <section id="cursos" class="tab-content" hidden>
            <div class="card">
                <h3 class="tab-title">Cursos</h3>

                <table class="data-table">
                    <thead>
                        <tr><th>ID</th><th>Nombre del Curso</th><th>Créditos</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>20D</td><td>Informática</td><td>4</td></tr>
                        <tr><td>21F</td><td>Administración</td><td>3</td></tr>
                        <tr><td>22K</td><td>Economía</td><td>3</td></tr>
                        <tr><td>23Q</td><td>Electrónica</td><td>3</td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section id="profesores" class="tab-content" hidden>
            <div class="card">
                <h3 class="tab-title">Profesores</h3>
                <table class="data-table">
                    <thead>
                        <tr><th>ID</th><th>Nombre</th><th>Email</th><th>Asignación</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>30E</td><td>Ing. Elena Soto</td><td>elena@edu.ui.ac.cr</td><td>Informática</td></tr>
                        <tr><td>31N</td><td>Lic. Marco Ríos</td><td>marco@edu.ui.ac.cr</td><td>Administración</td></tr>
                        <tr><td>40Z</td><td>Lic. Abrahan Puerta</td><td>abrahan@edu.ui.ac.cr</td><td>Economía</td></tr>
                        <tr><td>41P</td><td>Lic. Michael Mora</td><td>michael@edu.ui.ac.cr</td><td>Electrónica</td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Tabla de Registro -->
        <section id="registro" class="tab-content" hidden>
            <div class="card">
                <h3 class="tab-title">Registro de Estudiantes</h3>

                <form id="form-registro" class="form-column" novalidate>
                    <label for="reg-id">ID Estudiante:</label>
                    <input type="text" id="reg-id" required pattern="^[0-9]{2}[A-Z]$" placeholder="14B">

                    <label for="reg-nombre">Nombre Completo:</label>
                    <input type="text" id="reg-nombre" required minlength="5">

                    <label for="reg-email">Correo Institucional:</label>
                    <input type="email" id="reg-email" required>

                    <label for="reg-edad">Edad:</label>
                    <input type="number" id="reg-edad" min="17" max="120" required>

                    <label for="reg-carrera">Carrera:</label>
                    <select id="reg-carrera" required>
                        <option value="">Seleccione...</option>
                        <option value="Informática">Informática</option>
                        <option value="Administración">Administración</option>
                        <option value="Contabilidad">Contabilidad</option>
                        <option value="Electrónica">Electrónica</option>
                    </select>

                    <div class="form-actions">
                        <button type="submit" class="btn primary">Registrar</button>
                        <button type="reset" class="btn">Limpiar</button>
                    </div>
                </form>

                <div id="registro-mensaje" class="sr-only"></div>
            </div>
        </section>

    </main>
    
     <!-- Footer --> 
    <footer class="site-footer">
        <small>© Universidad Tecnóliga Internacional</small>
    </footer>

    <script>
        const loginForm = document.getElementById('login-form');
        const loginView = document.getElementById('login-view');
        const modulesBar = document.getElementById('modules-bar');
        const moduleButtons = document.querySelectorAll('.modules-link');
        const tabContents = document.querySelectorAll('.tab-content');

     
        //para que no se reinicie mientras se trabaja
       
        window.addEventListener("load", () => {
            if (localStorage.getItem("sesionUI") === "activa") {
                loginView.hidden = true;
                modulesBar.hidden = false;
                showTab("estudiantes");
            } else {
                modulesBar.hidden = true;
                tabContents.forEach(t => t.hidden = true);
            }
        });

        //Para iniciar la sesion 
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            if (!loginForm.reportValidity()) return;

            //para guardar la session
            localStorage.setItem("sesionUI", "activa");

            loginView.hidden = true;
            modulesBar.hidden = false;
            showTab("estudiantes");
        });

        
        // Para cerrar la sessión
        document.getElementById("cerrar-sesion").addEventListener("click", () => {
            localStorage.removeItem("sesionUI");
            location.reload();
        });

        // Función mostrar tab
        function showTab(id) {
            tabContents.forEach(t => t.hidden = true);
            moduleButtons.forEach(b => b.classList.remove('active'));
            const el = document.getElementById(id);
            if (el) el.hidden = false;
            const btn = document.querySelector(`.modules-link[data-target="${id}"]`);
            if (btn) btn.classList.add('active');
        }

        moduleButtons.forEach(btn => {
            if(btn.id !== "cerrar-sesion"){
                btn.addEventListener('click', () => {
                    showTab(btn.getAttribute('data-target'));
                });
            }
        });

        function filtrarEstudiantes() {
            const q = document.getElementById('filtro').value.toLowerCase().trim();
            const filas = document.querySelectorAll('#tabla-estudiantes tbody tr');
            filas.forEach(row => {
                const match = Array.from(row.cells).some(c => c.textContent.toLowerCase().includes(q));
                row.style.display = match || q === '' ? '' : 'none';
            });
        }

        document.getElementById('limpiar-filtro').addEventListener('click', () => {
            document.getElementById('filtro').value = '';
            filtrarEstudiantes();
        });

        // FUNCIÓN DE REGISTRAR
        const formRegistro = document.getElementById("form-registro");
        formRegistro.addEventListener("submit", function (e) {
            e.preventDefault();

            if (!formRegistro.reportValidity()) return;

            const id = document.getElementById("reg-id").value.trim();
            const nombre = document.getElementById("reg-nombre").value.trim();
            const email = document.getElementById("reg-email").value.trim();
            const edad = document.getElementById("reg-edad").value;
            const carrera = document.getElementById("reg-carrera").value;

            // Insertar en la tabla
            const tabla = document.querySelector("#tabla-estudiantes tbody");
            const fila = document.createElement("tr");

            fila.innerHTML = `
                <td>${id}</td>
                <td>${nombre}</td>
                <td>${email}</td>
                <td>${edad}</td>
                <td>${carrera}</td>
            `;

            tabla.appendChild(fila);

            document.getElementById("registro-mensaje").textContent =
                "Estudiante registrado correctamente.";

            formRegistro.reset();
        });

    </script>
</body>
</html>
